<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html>
    
<head>
<title>Setation</title>

<table>
<tr>
<td valign="top">
<a href="https://www.vbi.vt.edu/faculty/group_overview/Garner_Research_Group" target=_blank>
<img src="/static/vbi_logo.png" style="width:200px; height:50px;" />
</a>
</td>

<td width="100%" align="center">
<a href=/query><img src="/static/logo.png"></a>
</td>
		
<td valign="top">
<a href="http://www.hhmi.org" target=_blank>
<img src="/static/hhmi.png" alt="Virginia Tech" style="width:200px; height:50px"/>
</a>
</td>
</tr>
</table>
		
        <script src="/static/jquery.js"></script>
        <script src="/static/cytoscape.min.js"></script>
		<script src="/static/arbor.js"></script>
        <script>
$(function(){

    var nodes2 = [];
	
	var x = {{final|safe}};
	var c=0;


    for (var i=0; i< x[c].length; i++ ) {

        nodes2.push({
            data:{
                id: x[c][i][0], weight: x[c][i][0].length*10, favColor: 'silver', strength: x[c][i][1]
            },
            group: 'nodes2'
        });
    }
	
	var g = {{genes|safe}}

	for (var j=0; j<g.length; j++) {

	nodes2.push({
            data:{
                id: g[j], weight: g[j].length*10, favColor: 'yellow'
            },
            group: 'nodes2'
        });
	}
	
	var edges2= [];
	

	for (var i=0; i< x[c].length; i++ ) {
	for (var j=0; j < x[c][i][3].length; j++){
	
	edges2.push({ data: { id: i+'.'+x[c][i][1]+'.'+j, source: x[c][i][3][j], target: x[c][i][0]}, group: 'edges2' })
	
	}
	}

	
	options = {
	name: 'arbor',
	gravity: false,
	maxSimulationTime: 1500,
	liveUpdate: false,
	}
	
    $("#cy2").cytoscape({
		layout: options,
        elements: {
            nodes: nodes2,
			edges: edges2
        }  ,
			 style: cytoscape.stylesheet()
			  .selector("node")
                    .css({
						"shape" : "circle",
						"background-opacity": 0.35,
						'text-valign': 'center',
                        "content": "data(id)",
                        "text-halign": "center",
                        "text-outline-width": 1,
                        "text-outline-color": "data(favColor)",
                        "background-color": "data(favColor)",
						"z-index": "data(strength)"
                    })
		       .selector("edge")
                    .css({
                     //   "content": "data(id)",
                        "line-color": "#777",
                        "visibiliy": "invisible",
                        "cursor": "pointer",
                    })
                .selector(":selected")
                    .css({
                        "background-color": "red",
                        "line-color": "red",
                        "source-arrow-color": "#000",
                        "target-arrow-color": "#000"
                    })
				.selector('.faded')
					.css({
						'opacity':0.25,
						'text-opacity':0
					}),

				
				minZoom: 0.75,
				maxZoom: 2,
				panningEnabled: true,
				zoom: 1,

				
				
    
		
		  ready: function(){
		  window.cy = this;
		  var c = cy.$('node{degree=0}');
		  cy.remove(c);
		  
    cy.elements().unselectify();

    cy.on('tap', 'node', function(e){
      var node = e.cyTarget; 
      var neighborhood = node.neighborhood().add(node);

      cy.elements().addClass('faded');
      neighborhood.removeClass('faded');
    });

    cy.on('tap', function(e){
      if( e.cyTarget === cy ){
        cy.elements().removeClass('faded');
      }
    });

}
});
});
</script>
		

  <link rel="stylesheet" href="http://code.jquery.com/ui/1.10.3/themes/smoothness/jquery-ui.css" />
  <script src="http://code.jquery.com/ui/1.10.3/jquery-ui.js"></script>
  
<script>
  $(function() {
    $( "#accordion" ).accordion({
	  collapsible:true,
	  heightStyle: "content"
	});
  });
</script>

      <script>
  $(function() {
    $( "#accordion2" ).accordion({
	  collapsible:true,
	  heightStyle: "content"
	});
  });
  </script>

        <script>
  $(function() {
    $( "#accordion3" ).accordion({
	  collapsible:true,
	  heightStyle: "content"
	});
  });
  </script>
  
 <script>
  $(function() {
    $( "#tabs" ).tabs();
  });
  </script>
  
  <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-42745031-1', 'vt.edu');
  ga('send', 'pageview');

</script>
  
  <script language="javascript">
        function autoResizeDiv()
        {
            document.getElementById('#network-table').style.width = window.innerWidth +'px';
        }
        window.onresize = autoResizeDiv;
        autoResizeDiv();
  </script>
		
<style>




#cy2 {
	height: 800px;
	width: 100%;
	border: 1px solid #777;

}


#piechart_3d {
float: left;
	margin-left:auto;
	margin-right:auto;

	}

#accordion {
	width: 350px;
	}

#accordion2 {
	width: 350px;
	}	
#accordion3 {
	width: 350px;
	}	
#tabs-2 {
	width:400px;
	}


#tabs {
	font-family: Times New Roman;
	font-size:13px;
	height:800px;
	overflow-y: auto;
	overflow-x: hidden;
}	

#network-table {
	height: 800px;
	width: 1000px;
	margin-left:auto;
	margin-right:auto;
	table-layout:fixed;
	font-family: Times New Roman;
	font-size:13px;
	}


</style>

    </head>
    
    <body><br>
	
<table id="network-table">
<tr>
<td width="1000px">
<div id="cy2"></div>
</td>	

<td width="400px" height="800px" valign="top">

<div id="tabs">

 <ul>
    <li><a href="#tabs-1">Inputs</a></li>
    <li><a href="#tabs-2">Predicted Anamolies</a></li>
	<li><a href="#tabs-3">Predicted Genes</a></li>
  </ul>
  
  <div id="tabs-1">
	<div id="accordion">
	
	{%for gene in genes1%}
	{%for d in descrip%}
	{%if d.0 == gene%}
	<h3>{{gene}}<h3>
	<div>
	<p>
	{{d.3}}<br>
	{{d.4}}<br>
	Predicted Anomalies: {{d.6}} <br>
	Predicted Genes: {{d.5}}<br>
	Number of Abstracts: {{d.2}}
	
	</p>
	</div>
	
	{%endif%}
	{%endfor%}
	{%endfor%}
</div>
</div>

<div id="tabs-2">

<div id="accordion2">
{%for d in final1.0%}
	<h3>{{d.0}}<h3>
	{{d.3}}<br>
	{%for a in abs%}
	{%if a.0 == d.0%}
	<div>
	<p><li>
	{{a.5}}<br>
	{{a.1.0}}<br>
	<a target="_blank" href="http://www.ncbi.nlm.nih.gov/pubmed/{{a.3}}">{{a.2}}</a><br>
	{{a.4}}
	</li></p>
	
	</div>
{%endif%}
{%endfor%}
{%endfor%}
</div>
</div>

<div id="tabs-3">
<div id="accordion3">
{%for f in final1.2%}
	<h3>{{f.0}}<h3>
	{%for b in abs2%}
	{%if b.0 == f.0%}
	<div>
	<p><li>
	{{b.5}}<br>
	{{b.1.0}}<br>
	<a target="_blank" href="http://www.ncbi.nlm.nih.gov/pubmed/{{b.3}}">{{b.2}}</a><br>
	{{b.4}}
	</li></p>
	</div>
{%endif%}
{%endfor%}
{%endfor%}
</div>
</div>
</div>
</td>
</tr>
</table>
<br>

	</body>

</html>